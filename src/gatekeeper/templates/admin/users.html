{% extends "base.html" %}
{% block title %}Users - Gatekeeper{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center;">
    <h1>Users</h1>
    <div style="display: flex; gap: 0.5rem;">
        <button type="button" class="secondary outline" onclick="location.href='{{ url_for('admin_users.export') }}'">Export</button>
        <button type="button" class="outline" onclick="location.href='{{ url_for('admin_users.ldap_provision_form') }}'">Create User from LDAP</button>
        <button type="button" class="outline"
                hx-post="{{ url_for('admin_users.refresh_all_ldap') }}"
                hx-target="#ldap-refresh-status"
                hx-swap="innerHTML">Refresh All LDAP Users</button>
        <button type="button" onclick="location.href='{{ url_for('admin_users.create_form') }}'">Create User</button>
    </div>
</div>

<form role="search">
    <input type="search" name="search" placeholder="Search users..."
           value="{{ search }}"
           hx-get="{{ url_for('admin_users.list_users') }}"
           hx-trigger="input changed delay:300ms"
           hx-target="#users-table"
           hx-include="this">
</form>

<div id="ldap-refresh-status"></div>

<div id="users-table">
    {% include "admin/users_table.html" %}
</div>
{% endblock %}
