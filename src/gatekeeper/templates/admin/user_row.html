<tr>
    <td><a href="{{ url_for('admin_users.edit_form', username=user.username) }}">{{ user.username }}</a></td>
    <td>{{ user.email }}</td>
    <td>{{ user.fullname }}</td>
    <td>{% for grp in user_groups.get(user.username, []) %}<mark style="margin-right: 0.25rem;">{{ grp }}</mark>{% endfor %}{% if user_has_ldap_groups.get(user.username) %}<mark class="secondary" style="margin-right: 0.25rem;">+LDAP groups</mark>{% endif %}</td>
    <td>
        {% if user.enabled %}
            <mark>Enabled</mark>
        {% else %}
            <mark class="secondary">Disabled</mark>
        {% endif %}
    </td>
    <td>
        <div style="display: flex; gap: 0.5rem; align-items: center;">
            <button class="{{ 'secondary' if user.enabled else '' }} outline" style="padding: 4px 8px; margin: 0;"
                    hx-post="{{ url_for('admin_users.toggle_user', username=user.username) }}"
                    hx-target="closest tr"
                    hx-swap="outerHTML">
                {{ "Disable" if user.enabled else "Enable" }}
            </button>
            <button type="button" class="outline" style="padding: 4px 8px; margin: 0;"
                    onclick="location.href='{{ url_for('admin_users.edit_form', username=user.username) }}'">Edit</button>
            <button class="outline secondary" style="padding: 4px 8px; margin: 0;"
                    hx-post="{{ url_for('admin_users.rotate_salt', username=user.username) }}"
                    hx-confirm="Rotate login salt for '{{ user.username }}'? This will invalidate all their active sessions.">
                Rotate Salt
            </button>
            <button class="outline secondary" style="padding: 4px 8px; margin: 0;"
                    hx-post="{{ url_for('admin_users.delete_user', username=user.username) }}"
                    hx-target="closest tr"
                    hx-swap="outerHTML"
                    hx-confirm="Permanently delete user '{{ user.username }}'? This cannot be undone.">
                Delete
            </button>
        </div>
    </td>
</tr>
